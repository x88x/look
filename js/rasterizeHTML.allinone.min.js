!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).rasterizeHTML=e()}(function(){return function r(o,a,s){function i(t,e){if(!a[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},o[t][0].call(n.exports,function(e){return i(o[t][1][e]||e)},n,n.exports,r,o,a,s)}return a[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)i(s[e]);return i}({1:[function(e,t,n){var r,o=function(e,t,n,r){var o=function(n){"use strict";var r={},t=[];return r.joinUrl=function(e,t){return e?n.resolve(e,t):t},r.getConstantUniqueIdFor=function(e){return t.indexOf(e)<0&&t.push(e),t.indexOf(e)},r.clone=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},r.parseOptionalParameters=function(e){var t,n={canvas:null,options:{}};return null==e[0]||"object"==typeof(t=e[0])&&null!==t&&Object.prototype.toString.apply(t).match(/\[object (Canvas|HTMLCanvasElement)\]/i)?(n.canvas=e[0]||null,n.options=r.clone(e[1])):n.options=r.clone(e[0]),n},r}(e),a=function(a){"use strict";function i(e,t,n){var r=e[t];return e[t]=function(){var e=Array.prototype.slice.call(arguments);return n.apply(this,[e,r])},r}var e={baseUrlRespectingXhr:function(t,o){return function(){var e=new t;return i(e,"open",function(e,t){var n=e.shift(),r=e.shift(),r=a.joinUrl(o,r);return t.apply(this,[n,r].concat(e))}),e}},finishNotifyingXhr:function(t){function e(){var e=new t;return i(e,"send",function(e,t){return r+=1,t.apply(this,arguments)}),e.addEventListener("load",function(){o+=1,n()}),e}var n,r=0,o=0,a=!1,s=new Promise(function(e){n=function(){r-o<=0&&a&&e({totalCount:r})}});return e.waitForRequestsToFinish=function(){return a=!0,n(),s},e}};return e}(o),e=function(a){"use strict";function r(e){return Array.prototype.slice.call(e)}var e={},s={active:!0,hover:!0,focus:!1,target:!1};return e.fakeUserAction=function(e,t,n){var r=e.querySelector(t),o=":"+n,t="rasterizehtml"+n;r&&(s[n]?a.addClassNameRecursively(r,t):a.addClassName(r,t),a.rewriteCssSelectorWith(e,o,"."+t))},e.persistInputValues=function(e){function t(e){return"checkbox"===e.type||"radio"===e.type}var n=e.querySelectorAll("input"),e=e.querySelectorAll("textarea");r(n).filter(t).forEach(function(e){e.checked?e.setAttribute("checked",""):e.removeAttribute("checked")}),r(n).filter(function(e){return!t(e)}).forEach(function(e){e.setAttribute("value",e.value)}),r(e).forEach(function(e){e.textContent=e.value})},e.rewriteTagNameSelectorsToLowerCase=function(e){a.lowercaseCssTypeSelectors(e,a.findHtmlOnlyNodeNames(e))},e}(function(){"use strict";function s(e){return Array.prototype.slice.call(e)}var n={};function r(e,t,o){var a="((?:^|[^.#:\\w])|(?=\\W))("+t.join("|")+")(?=\\W|$)";s(e.querySelectorAll("style")).forEach(function(e){var t,n;void 0===e.sheet&&(t=e,n=document.implementation.createHTMLDocument(""),(r=document.createElement("style")).textContent=t.textContent,n.body.appendChild(r),t.sheet=r.sheet);var r=s(e.sheet.cssRules).filter(function(e){return e.selectorText&&new RegExp(a,"i").test(e.selectorText)});r.length&&(r.forEach(function(e){var t,n=e.selectorText.replace(new RegExp(a,"gi"),function(e,t,n){return t+o(n)});n!==e.selectorText&&(t=n,e=(n=e).cssText.replace(/^[^\{]+/,""),i(n,t+" "+e))}),e.textContent=u(e.sheet.cssRules))})}n.addClassName=function(e,t){e.className+=" "+t},n.addClassNameRecursively=function(e,t){n.addClassName(e,t),e.parentNode!==e.ownerDocument&&n.addClassNameRecursively(e.parentNode,t)};var i=function(e,t){var n=e.parentStyleSheet,e=s(n.cssRules).indexOf(e);n.insertRule(t,e+1),n.deleteRule(e)},u=function(e){return s(e).reduce(function(e,t){return e+t.cssText},"")};return n.rewriteCssSelectorWith=function(e,t,n){r(e,[t],function(){return n})},n.lowercaseCssTypeSelectors=function(e,t){r(e,t,function(e){return e.toLowerCase()})},n.findHtmlOnlyNodeNames=function(e){for(var t,n=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_ELEMENT),r={},o={};t=n.currentNode.tagName.toLowerCase(),"http://www.w3.org/1999/xhtml"===n.currentNode.namespaceURI?r[t]=!0:o[t]=!0,n.nextNode(););return Object.keys(r).filter(function(e){return!o[e]})},n}()),a=function(u,p,t,x){"use strict";var e={};function n(e){try{return t.failOnParseError(e)}catch(e){throw{message:"Invalid source",originalError:e}}}e.executeJavascript=function(h,f){return new Promise(function(t){function n(){x.document.getElementsByTagName("body")[0].removeChild(i)}function e(){var e=i.contentDocument;t({document:e,errors:u,cleanUp:n})}var r,o,a,s,i=(r=x.document,o="iframe",a=f.width,s=f.height,(o=r.createElement(o)).style.visibility="hidden",o.style.width=a+"px",o.style.height=s+"px",o.style.position="absolute",o.style.top=-1e4-s+"px",o.style.left=-1e4-a+"px",r.getElementsByTagName("body")[0].appendChild(o),o),r=h.outerHTML,u=[],c=f.executeJsTimeout||0,o=i.contentWindow.XMLHttpRequest,l=p.finishNotifyingXhr(o),o=p.baseUrlRespectingXhr(l,f.baseUrl);i.onload=function(){var t;(0<(t=c)?new Promise(function(e){setTimeout(e,t)}):Promise.resolve()).then(l.waitForRequestsToFinish).then(e)},i.contentDocument.open(),i.contentWindow.XMLHttpRequest=o,i.contentWindow.onerror=function(e){u.push({resourceType:"scriptExecution",msg:e})},i.contentDocument.write("<!DOCTYPE html>"),i.contentDocument.write(r),i.contentDocument.close()})},e.calculateDocumentContentSize=function(v,w){return new Promise(function(m,d){var e,t,n,g=w.zoom||1,y=(e=w.width,t=w.height,n=g,e=Math.floor(e/n),n=Math.floor(t/n),t=x.document,e=e,n=n,(t=t.createElement("iframe")).style.width=e+"px",t.style.height=n+"px",t.style.visibility="hidden",t.style.position="absolute",t.style.top=-1e4-n+"px",t.style.left=-1e4-e+"px",t.style.borderWidth=0,t.sandbox="allow-same-origin",t.scrolling="no",t);x.document.getElementsByTagName("body")[0].appendChild(y),y.onload=function(){var e,t,n,r,o,a,s,i,u,c,l,h,f,p=y.contentDocument;try{f=v.tagName,t=p.querySelector(f),n=w.clip,r=w.width,o=w.height,a=g,c=Math.max(t.scrollWidth,t.clientWidth),l=Math.max(t.scrollHeight,t.clientHeight),h=n?(s=(h=function(e,t){var n=e.querySelector(t);if(n)return n;if(e.ownerDocument.querySelector(t)===e)return e;throw{message:"Clipping selector not found"}}(t,n).getBoundingClientRect()).top,i=h.left,u=h.width,h.height):(i=s=0,u=c,l),h={width:u,height:h},o={width:Math.max(h.width*a,r),height:Math.max(h.height*a,o)},t=x.getComputedStyle(t.ownerDocument.documentElement).fontSize,e={left:i,top:s,width:o.width,height:o.height,viewportWidth:c,viewportHeight:l,rootFontSize:t},m(e)}catch(e){d(e)}finally{x.document.getElementsByTagName("body")[0].removeChild(y)}},y.contentDocument.open(),y.contentDocument.write("<!DOCTYPE html>"),y.contentDocument.write("html"===(t=(e=v).tagName.toLowerCase())||"body"===t?e.outerHTML:'<body style="margin: 0;">'+e.outerHTML+"</body>"),y.contentDocument.close()})},e.parseHtmlFragment=function(e){var t=x.document.implementation.createHTMLDocument("");if(t.documentElement.innerHTML=e,!(t=t.querySelector("body").firstChild))throw"Invalid source";return t},e.parseHTML=function(e){var t=x.document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e,function(e,t){var n,r,o,a=/<html((?:\s+[^>]*)?)>/im.exec(t),t=x.document.implementation.createHTMLDocument("");if(a)for(a="<div"+a[1]+"></div>",t.documentElement.innerHTML=a,r=t.querySelector("div"),n=0;n<r.attributes.length;n++)o=r.attributes[n],e.documentElement.setAttribute(o.name,o.value)}(t,e),t},e.validateXHTML=function(e){n(e=(new DOMParser).parseFromString(e,"application/xml"))};var c=null;return e.loadDocument=function(e,t){return s=e,i=t,new Promise(function(e,t){function n(e){t({message:"Unable to load page",originalError:e})}var r,o=new window.XMLHttpRequest,a=(a=r=u.joinUrl(i.baseUrl,s),"none"===(r=i.cache)||"repeated"===r?a+"?_="+(c=null===c||"repeated"!==r?Date.now():c):a);o.addEventListener("load",function(){200===o.status||0===o.status?e(o.responseXML):n(o.statusText)},!1),o.addEventListener("error",function(e){n(e)},!1);try{o.open("GET",a,!0),o.responseType="document",o.send(null)}catch(e){n(e)}}).then(n);var s,i},e}(o,a,n,window),n=function(r){"use strict";function i(e,t){return t?URL.createObjectURL(new Blob([e],{type:"image/svg+xml"})):"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e)}function u(e){e instanceof Blob&&URL.revokeObjectURL(e)}function o(o){return new Promise(function(t,e){var n=document.createElement("canvas"),r=new Image;r.onload=function(){var e=n.getContext("2d");try{e.drawImage(r,0,0),n.toDataURL("image/png"),t(!0)}catch(e){t(!1)}},r.onerror=e,r.src=o})}var c,e={},a='<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><foreignObject></foreignObject></svg>',l=function(){return new Promise(function(t,e){var n;(function(){if(r.Blob)try{return new Blob(["<b></b>"],{type:"text/xml"}),1}catch(e){}})()&&r.URL?o(n=i(a,!0)).then(function(e){return u(n),!e&&o(i(a,!1)).then(function(e){return e})},function(){return!1}).then(function(e){t(!e)},function(){e()}):t(!1)})};return e.renderSvg=function(s){return new Promise(function(e,t){function n(){r&&u(r)}var r,o,a=new Image;a.onload=function(){a.onload=null,a.onerror=null,n(),e(a)},a.onerror=function(){n(),t()},o=s,(c=void 0===c?l():c).then(function(e){return i(o,e)}).then(function(e){r=e,a.src=r},t)})},e}(window);return function(u,r,o){"use strict";var c={};function n(a,s,i){return r.loadDocument(a,i).then(function(e){var t,n,r,o;return t=e,n=a,r=i,(o=document.implementation.createHTMLDocument("")).replaceChild(t.documentElement,o.documentElement),t=r?u.clone(r):{},r.baseUrl||(t.baseUrl=n),c.drawDocument((e={document:o,options:t}).document,s,e.options)})}return c.drawDocument=function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1),n=u.parseOptionalParameters(t),r=e.documentElement||e;return o.rasterize(r,n.canvas,(e=(t=n).canvas,r=t.options,n=e?e.width:300,e=e?e.height:200,e={width:void 0!==r.width?r.width:n,height:void 0!==r.height?r.height:e},(t=u.clone(t.options)).width=e.width,t.height=e.height,t))},c.drawHTML=function(){var e,t=arguments[0],n=Array.prototype.slice.call(arguments,1),n=u.parseOptionalParameters(n);return e=n.canvas,n=n.options,t=r.parseHTML(t),c.drawDocument(t,e,n)},c.drawURL=function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return n(e,(t=u.parseOptionalParameters(t)).canvas,t.options)},c}(o,a,function(o,a,s,r,e,i){"use strict";function u(t){return e.renderSvg(t).then(function(e){return{image:e,svg:t}},function(e){throw l(e)})}function c(e,t,n){return r.drawDocumentAsSvg(e,n).then(u).then(function(e){return t&&function(e,t){try{t.getContext("2d").drawImage(e,0,0)}catch(e){throw l(e)}}(e.image,t),e})}var t={},l=function(e){return{message:"Error rendering page",originalError:e}};return t.rasterize=function(e,n,r){var t=o.clone(r);return t.inlineScripts=!0===r.executeJs,i.inlineReferences(e,t).then(function(t){return r.executeJs?a.executeJavascript(e,r).then(function(e){var t=e.document;return s.persistInputValues(t),{document:t,errors:e.errors,cleanUp:e.cleanUp}}).then(function(e){return{element:e.document.documentElement,errors:t.concat(e.errors),cleanUp:e.cleanUp}}):{element:e,errors:t,cleanUp:function(){}}}).then(function(t){return c(t.element,n,r).then(function(e){return t.cleanUp(),{image:e.image,svg:e.svg,errors:t.errors}})})},t}(o,a,e,function(s,i,u){"use strict";function c(t){var e=Object.keys(t);return e.length?" "+e.map(function(e){return e+'="'+t[e]+'"'}).join(" "):""}var r={};return r.getSvgForDocument=function(e,t,n){return i.rewriteTagNameSelectorsToLowerCase(e),r=e,o=t,a=n,e=u.serializeToString(r),s.validateXHTML(e),t=o,n=Math.round(t.viewportWidth),r=Math.round(t.viewportHeight),(r={x:-t.left,y:-t.top,width:n,height:r}).style=(r.style||"")+"float: left;",r.externalResourcesRequired=!0,'<svg xmlns="http://www.w3.org/2000/svg"'+c((o={width:(o=o).width,height:o.height,"font-size":o.rootFontSize},1!==(a=a||1)&&(o.style="transform:scale("+a+"); transform-origin: 0 0;"),o))+'><style scoped="">html::-webkit-scrollbar { display: none; }</style><foreignObject'+c(r)+">"+e+"</foreignObject></svg>";var r,o,a},r.drawDocumentAsSvg=function(t,n){return["hover","active","focus","target"].forEach(function(e){n[e]&&i.fakeUserAction(t,n[e],e)}),s.calculateDocumentContentSize(t,n).then(function(e){return r.getSvgForDocument(t,e,n.zoom)})},r}(a,e,t),n,r))};void 0===(r=this)&&void 0!==window&&(r=window),"object"==typeof t&&t.exports?t.exports=o(e("url"),e("xmlserializer"),e("sane-domparser-error"),e("inlineresources")):r.rasterizeHTML=o(r.url,r.xmlserializer,r.sanedomparsererror,r.inlineresources)},{inlineresources:5,"sane-domparser-error":14,url:15,xmlserializer:17}],2:[function(c,n,r){!function(t){!function(){!function(e){"object"==typeof r&&void 0!==n?n.exports=e():("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).cssFontFaceSrc=e()}(function(){return function r(o,a,s){function i(t,e){if(!a[t]){if(!o[t]){var n="function"==typeof c&&c;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},o[t][0].call(n.exports,function(e){return i(o[t][1][e]||e)},n,n.exports,r,o,a,s)}return a[t].exports}for(var u="function"==typeof c&&c,e=0;e<s.length;e++)i(s[e]);return i}({1:[function(_,e,t){"use strict";function X(e,t,n,r){this.message=e,this.expected=t,this.found=n,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,X)}function n(){this.constructor=r}var r=X,o=Error;n.prototype=o.prototype,r.prototype=new n,X.buildMessage=function(e,t){var a={literal:function(e){return'"'+r(e.text)+'"'},class:function(e){for(var t="",n=0;n<e.parts.length;n++)t+=e.parts[n]instanceof Array?o(e.parts[n][0])+"-"+o(e.parts[n][1]):o(e.parts[n]);return"["+(e.inverted?"^":"")+t+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}return"Expected "+function(e){for(var t,n,r=new Array(e.length),o=0;o<e.length;o++)r[o]=(n=e[o],a[n.type](n));if(r.sort(),0<r.length){for(t=o=1;o<r.length;o++)r[o-1]!==r[o]&&(r[t]=r[o],t++);r.length=t}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+(t?'"'+r(t)+'"':"end of input")+" found."},e.exports={SyntaxError:X,parse:function(u,e){var c={},t={start:k},n=k,r="",o=function(){return[]},i=",",l=I(",",!1),h=function(e,t){return[e].concat(t)},f=function(e){return[e]},p=function(e,t){return{url:e,format:t}},m=function(e){return{url:e}},a="url(",s=I("url(",!1),d=")",g=I(")",!1),y="format(",v=I("format(",!1),w="local(",x=I("local(",!1),b=function(e){return{local:e}},C=/^[^)]/,E=D([")"],!0,!1),R=function(e){return W.extractValue(e.join(""))},U=/^[ \t\r\n\f]/,A=D([" ","\t","\r","\n","\f"],!1,!1),S=0,T=[{line:1,column:1}],N=0,j=[],O=0;if("startRule"in(e=void 0!==e?e:{})){if(!(e.startRule in t))throw new Error("Can't start parsing from rule \""+e.startRule+'".');n=t[e.startRule]}function I(e,t){return{type:"literal",text:e,ignoreCase:t}}function D(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function P(e){var t,n=T[e];if(n)return n;for(t=e-1;!T[t];)t--;for(n={line:(n=T[t]).line,column:n.column};t<e;)10===u.charCodeAt(t)?(n.line++,n.column=1):n.column++,t++;return T[e]=n}function L(e,t){var n=P(e),r=P(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function F(e){S<N||(N<S&&(N=S,j=[]),j.push(e))}function k(){var e,t=function e(){var t,n,r,o,a=S,s=q();if(s!==c){for(t=[],n=z();n!==c;)t.push(n),n=z();if(t!==c)if(44===u.charCodeAt(S)?(n=i,S++):(n=c,0===O&&F(l)),n!==c){for(r=[],o=z();o!==c;)r.push(o),o=z();a=r!==c&&(o=e())!==c?s=h(s,o):(S=a,c)}else S=a,a=c;else S=a,a=c}else S=a,a=c;return a===c&&(a=S,a=s=(s=q())!==c?f(s):s),a}();return t===c&&(t=S,t=e=(e=r)!==c?o():e),t}function q(){var e,t,n,r,o=function(){var e,t,n,r,o,a,s,i=S;if((e=M())!==c){if(t=[],(n=z())!==c)for(;n!==c;)t.push(n),n=z();else t=c;i=t!==c?(s=S,u.substr(S,7)===y?(r=y,S+=7):(r=c,0===O&&F(v)),(n=s=r!==c?(o=H())!==c?(41===u.charCodeAt(S)?(a=d,S++):(a=c,0===O&&F(g)),a!==c?r=o:(S=s,c)):(S=s,c):(S=s,c))!==c?e=p(e,n):(S=i,c)):(S=i,c)}else S=i,i=c;return i===c&&(i=S,i=e=(e=M())!==c?m(e):e),i}();return o===c?(r=S,u.substr(S,6)===w?(e=w,S+=6):(e=c,0===O&&F(x)),r=e!==c?(t=H())!==c?(41===u.charCodeAt(S)?(n=d,S++):(n=c,0===O&&F(g)),n!==c?e=b(t):(S=r,c)):(S=r,c):(S=r,c)):o}function M(){var e,t,n,r=S;return u.substr(S,4)===a?(e=a,S+=4):(e=c,0===O&&F(s)),e!==c&&(t=H())!==c?(41===u.charCodeAt(S)?(n=d,S++):(n=c,0===O&&F(g)),n!==c?t:(S=r,c)):(S=r,c)}function H(){var e,t=[];if(C.test(u.charAt(S))?(e=u.charAt(S),S++):(e=c,0===O&&F(E)),e!==c)for(;e!==c;)t.push(e),C.test(u.charAt(S))?(e=u.charAt(S),S++):(e=c,0===O&&F(E));else t=c;return t=t!==c?R(t):t}function z(){var e;return U.test(u.charAt(S))?(e=u.charAt(S),S++):(e=c,0===O&&F(A)),e}var V,B,$,W=_("../util");if((n=n())!==c&&S===u.length)return n;throw n!==c&&S<u.length&&F({type:"end"}),V=j,B=N<u.length?u.charAt(N):null,$=N<u.length?L(N,N+1):L(N,N),new X(X.buildMessage(V,B),V,B,$)}}},{"../util":3}],2:[function(e,t,n){var r=e("./grammar");n.SyntaxError=function(e,t){this.message=e,this.offset=t},n.parse=function(e){try{return r.parse(e)}catch(e){throw new n.SyntaxError(e.message,e.offset)}},n.serialize=function(e){return e.map(function(e){var t;return e.url?(t='url("'+e.url+'")',e.format&&(t+=' format("'+e.format+'")')):t='local("'+e.local+'")',t}).join(", ")}},{"./grammar":1}],3:[function(e,t,n){n.extractValue=function(e){return t=e.replace(/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/,"$1"),n=/^'(.*)'$/,(e=/^"(.*)"$/).test(t)?t.replace(e,"$1"):n.test(t)?t.replace(n,"$1"):t;var t,n}},{}]},{},[2])(2)})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){"use strict";var r=e("./cssSupport");n.extractCssUrl=function(e){var t=/^url\(("[^"]+"|'[^']+'|[^\)]+)\)/;if(!t.test(e))throw new Error("Invalid url");return e=t.exec(e)[1],r.unquoteString(e.replace(/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/,"$1"))},n.parse=function(e){return function(e){var t,o="(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+)",n=new RegExp("(?:\\s*(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+))+","g"),r=[];if(e.match(new RegExp("^\\s*((?:\\s*(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+))+)(?:\\s*,\\s*((?:\\s*(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+))+))*\\s*$"))){for(t=n.exec(e);t;)r.push(function(e){for(var t=new RegExp(o,"g"),n=[],r=t.exec(e);r;)n.push(r[1]),r=t.exec(e);return n}(t[0])),t=n.exec(e);return r}return[]}(e).map(function(e){var t=function(e){for(var t=0;t<e.length;t++)try{return{url:n.extractCssUrl(e[t]),idx:t}}catch(e){}}(e);return t?{preUrl:e.slice(0,t.idx),url:t.url,postUrl:e.slice(t.idx+1)}:{preUrl:e}})},n.serialize=function(e){return e.map(function(e){var t=[].concat(e.preUrl);return e.url&&t.push('url("'+e.url+'")'),(t=e.postUrl?t.concat(e.postUrl):t).join(" ")}).join(", ")}},{"./cssSupport":4}],4:[function(e,t,o){"use strict";o.unquoteString=function(e){var t=/^"(.*)"$/,n=/^'(.*)'$/;return t.test(e)?e.replace(t,"$1"):n.test(e)?e.replace(n,"$1"):e},o.rulesForCssText=function(e){var t=document.implementation.createHTMLDocument(""),n=document.createElement("style");return n.textContent=e,t.body.appendChild(n),n=n.sheet.cssRules,Array.prototype.slice.call(n)},o.cssRulesToText=function(e){return e.reduce(function(e,t){return e+t.cssText},"")},o.exchangeRule=function(e,t,n){t=e.indexOf(t),e[t]=o.rulesForCssText(n)[0]},o.changeFontFaceRuleSrc=function(e,t,n){var r="@font-face { font-family: "+t.style.getPropertyValue("font-family")+"; ";t.style.getPropertyValue("font-style")&&(r+="font-style: "+t.style.getPropertyValue("font-style")+"; "),t.style.getPropertyValue("font-weight")&&(r+="font-weight: "+t.style.getPropertyValue("font-weight")+"; "),t.style.getPropertyValue("unicode-range")&&(r+="unicode-range: "+t.style.getPropertyValue("unicode-range")+"; "),o.exchangeRule(e,t,r+="src: "+n+"}")}},{}],5:[function(e,t,o){"use strict";function i(e,t){return!1!==t.cache&&"none"!==t.cache&&t.cacheBucket?c.memoize(e,n,t.cacheBucket):e}function u(r,e,t){var o=l.rulesForCssText(r);return s.loadCSSImportsForRules(o,e,t).then(function(n){return s.loadAndInlineCSSResourcesForRules(o,t).then(function(e){var t=n.errors.concat(e.errors);return{hasChanges:e=n.hasChanges||e.hasChanges,content:r=e?l.cssRulesToText(o):r,errors:t}})})}function n(n){return n.map(function(e,t){return t===n.length-1&&(e={baseUrl:(t=e.baseUrl,c.joinUrl(t,"."))}),JSON.stringify(e)})}var c=e("./util"),r=e("./inlineImage"),a=e("./inlineScript"),s=e("./inlineCss"),l=e("./cssSupport");function h(n,e){return c.ajax(n,e).then(function(e){return{content:e,cssRules:l.rulesForCssText(e)}}).then(function(e){var t=s.adjustPathsOfCssResources(n,e.cssRules);return{content:e.content,cssRules:e.cssRules,hasChanges:t}}).then(function(t){return s.loadCSSImportsForRules(t.cssRules,[],e).then(function(e){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||e.hasChanges,errors:e.errors}})}).then(function(t){return s.loadAndInlineCSSResourcesForRules(t.cssRules,e).then(function(e){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||e.hasChanges,errors:t.errors.concat(e.errors)}})}).then(function(e){var t=e.content;return{content:t=e.hasChanges?l.cssRulesToText(e.cssRules):t,errors:e.errors}})}o.loadAndInlineStyles=function(e,t){var n,n=(n=(n=e).getElementsByTagName("style"),Array.prototype.filter.call(n,function(e){return!e.attributes.type||"text/css"===e.attributes.type.value})),o=[],a=[],s=c.clone(t);return s.baseUrl=s.baseUrl||c.getDocumentBaseUrl(e),Promise.all(n.map(function(e){return r=a,e=(t=e).textContent,i(u,n=s)(e,r,n).then(function(e){return e.hasChanges&&(t.childNodes[0].nodeValue=e.content),c.cloneArray(e.errors)}).then(function(e){o=o.concat(e)});var t,n,r})).then(function(){return o})},o.loadAndInlineCssLinks=function(e,o){var t,e=(t=(t=e).getElementsByTagName("link"),Array.prototype.filter.call(t,function(e){return e.attributes.rel&&"stylesheet"===e.attributes.rel.value&&(!e.attributes.type||"text/css"===e.attributes.type.value)})),s=[];return Promise.all(e.map(function(a){return t=o,n=(e=a).attributes.href.value,r=c.getDocumentBaseUrl(e.ownerDocument),!(e=c.clone(t)).baseUrl&&r&&(e.baseUrl=r),i(h,t)(n,e).then(function(e){return{content:e.content,errors:c.cloneArray(e.errors)}}).then(function(e){var t,n=a,r=e.content+"\n",o=n.parentNode;(r=r.trim())&&((t=n.ownerDocument.createElement("style")).type="text/css",t.appendChild(n.ownerDocument.createTextNode(r)),o.insertBefore(t,n)),o.removeChild(n),s=s.concat(e.errors)},function(e){s.push({resourceType:"stylesheet",url:e.url,msg:"Unable to load stylesheet "+e.url})});var e,t,n,r})).then(function(){return s})},o.loadAndInlineImages=r.inline,o.loadAndInlineScript=a.inline,o.inlineReferences=function(t,n){var r=[],e=[o.loadAndInlineImages,o.loadAndInlineStyles,o.loadAndInlineCssLinks];return!1!==n.inlineScripts&&e.push(o.loadAndInlineScript),Promise.all(e.map(function(e){return e(t,n).then(function(e){r=r.concat(e)})})).then(function(){return r})}},{"./cssSupport":4,"./inlineCss":6,"./inlineImage":7,"./inlineScript":8,"./util":9}],6:[function(e,t,h){"use strict";function u(e,t,n){e.style.setProperty(t,n,e.style.getPropertyPriority(t))}function c(e){return e.filter(function(e){return e.type===window.CSSRule.STYLE_RULE&&(e.style.getPropertyValue("background-image")||e.style.getPropertyValue("background"))})}function l(e){var t=[];return e.forEach(function(e){e.style.getPropertyValue("background-image")?t.push({property:"background-image",value:e.style.getPropertyValue("background-image"),rule:e}):e.style.getPropertyValue("background")&&t.push({property:"background",value:e.style.getPropertyValue("background"),rule:e})}),t}function s(e){return e.filter(function(e){return e.type===window.CSSRule.FONT_FACE_RULE&&e.style.getPropertyValue("src")})}function n(e){return e.filter(function(e){return e.type===window.CSSRule.IMPORT_RULE&&e.href})}function f(e){var n=[];return e.forEach(function(e,t){e.url&&!p.isDataUri(e.url)&&n.push(t)}),n}function i(e){var n=[];return e.forEach(function(e,t){e.url&&!p.isDataUri(e.url)&&n.push(t)}),n}var p=e("./util"),m=e("./cssSupport"),d=e("./backgroundValueParser"),g=e("css-font-face-src");function y(n,e,t){var r=n.indexOf(e);n.splice(r,1),t.forEach(function(e,t){n.splice(r+t,0,e)})}h.adjustPathsOfCssResources=function(r,o){var e=l(e=c(o)),a=!1;return e.forEach(function(e){var n=d.parse(e.value),t=f(n);0<t.length&&(t.forEach(function(e){var t=n[e].url,t=p.joinUrl(r,t);n[e].url=t}),t=d.serialize(n),u(e.rule,e.property,t),a=!0)}),s(o).forEach(function(e){var n,t=e.style.getPropertyValue("src");try{n=g.parse(t)}catch(e){return}0<(t=i(n)).length&&(t.forEach(function(e){var t=n[e].url,t=p.joinUrl(r,t);n[e].url=t}),m.changeFontFaceRuleSrc(o,e,g.serialize(n)),a=!0)}),n(o).forEach(function(e){var t=e.href,t=p.joinUrl(r,t);m.exchangeRule(o,e,"@import url("+t+");"),a=!0}),a},h.loadCSSImportsForRules=function(t,i,u){var e=n(t),c=[],l=!1;return Promise.all(e.map(function(e){return n=t,o=i,a=u,s=(r=e).href,s=m.unquoteString(s),e=p.joinUrl(a.baseUrl,s),(0<=o.indexOf(e)?(y(n,r,[]),Promise.resolve([])):(o.push(e),p.ajax(s,a).then(function(e){var t=m.rulesForCssText(e);return h.loadCSSImportsForRules(t,o,a).then(function(e){return h.adjustPathsOfCssResources(s,t),y(n,r,t),e.errors})},function(e){throw{resourceType:"stylesheet",url:e.url,msg:"Unable to load stylesheet "+e.url}}))).then(function(e){c=c.concat(e),l=!0},function(e){c.push(e)});var n,r,o,a,s})).then(function(){return{hasChanges:l,errors:c}})},h.loadAndInlineCSSResourcesForRules=function(t,n){var r=!1,o=[];return Promise.all([function(e,a){var e=l(e=c(e)),s=[],i=!1;return Promise.all(e.map(function(t){return e=t.value,n=a,r=d.parse(e),e=f(r),o=!1,p.collectAndReportErrors(e.map(function(t){var e=r[t].url;return p.getDataURIForImageURL(e,n).then(function(e){r[t].url=e,o=!0},function(e){throw{resourceType:"backgroundImage",url:e.url,msg:"Unable to load background-image "+e.url}})})).then(function(e){return{backgroundValue:d.serialize(r),hasChanges:o,errors:e}}).then(function(e){e.hasChanges&&(u(t.rule,t.property,e.backgroundValue),i=!0),s=s.concat(e.errors)});var e,n,r,o})).then(function(){return{hasChanges:i,errors:s}})},function(n,e){var t=s(n),r=[],o=!1;return Promise.all(t.map(function(t){return function(e,r){var o,a=!1;try{o=g.parse(e)}catch(e){o=[]}return e=i(o),p.collectAndReportErrors(e.map(function(e){var t=o[e],n=t.format||"woff";return p.binaryAjax(t.url,r).then(function(e){e=btoa(e),t.url="data:font/"+n+";base64,"+e,a=!0},function(e){throw{resourceType:"fontFace",url:e.url,msg:"Unable to load font-face "+e.url}})})).then(function(e){return{srcDeclarationValue:g.serialize(o),hasChanges:a,errors:e}})}(t.style.getPropertyValue("src"),e).then(function(e){e.hasChanges&&(m.changeFontFaceRuleSrc(n,t,e.srcDeclarationValue),o=!0),r=r.concat(e.errors)})})).then(function(){return{hasChanges:o,errors:r}})}].map(function(e){return e(t,n).then(function(e){r=r||e.hasChanges,o=o.concat(e.errors)})})).then(function(){return{hasChanges:r,errors:o}})}},{"./backgroundValueParser":3,"./cssSupport":4,"./util":9,"css-font-face-src":2}],7:[function(e,t,n){"use strict";function r(e){return Array.prototype.slice.call(e)}var a=e("./util");n.inline=function(e,o){var t=r(e.getElementsByTagName("img")),n=r(e.getElementsByTagName("image")),e=(e=e.getElementsByTagName("input"),Array.prototype.filter.call(e,function(e){return"image"===e.type})),t=(t=(t=t.concat(n)).concat(e)).filter(function(e){var t=null;return e.hasAttribute("src")?t=e.getAttribute("src"):e.hasAttributeNS("http://www.w3.org/1999/xlink","href")?t=e.getAttributeNS("http://www.w3.org/1999/xlink","href"):e.hasAttribute("href")&&(t=e.getAttribute("href")),null!==t&&!a.isDataUri(t)});return a.collectAndReportErrors(t.map(function(t){return n=o,r=null,(e=t).hasAttribute("src")?r=e.getAttribute("src"):e.hasAttributeNS("http://www.w3.org/1999/xlink","href")?r=e.getAttributeNS("http://www.w3.org/1999/xlink","href"):e.hasAttribute("href")&&(r=e.getAttribute("href")),e=a.getDocumentBaseUrl(e.ownerDocument),!(n=a.clone(n)).baseUrl&&e&&(n.baseUrl=e),a.getDataURIForImageURL(r,n).then(function(e){return e},function(e){throw{resourceType:"image",url:e.url,msg:"Unable to load image "+e.url}}).then(function(e){t.attributes.src?t.attributes.src.value=e:t.attributes["xlink:href"]?t.attributes["xlink:href"].value=e:t.attributes.href&&(t.attributes.href.value=e)});var e,n,r}))}},{"./util":9}],8:[function(e,t,n){"use strict";var a=e("./util");n.inline=function(e,o){var t;return t=(t=e).getElementsByTagName("script"),e=Array.prototype.filter.call(t,function(e){return!!e.attributes.src}),a.collectAndReportErrors(e.map(function(n){return t=o,r=n.attributes.src.value,e=a.getDocumentBaseUrl(n.ownerDocument),!(t=a.clone(t)).baseUrl&&e&&(t.baseUrl=e),a.ajax(r,t).catch(function(e){throw{resourceType:"script",url:e.url,msg:"Unable to load script "+e.url}}).then(function(e){var t=e;(e=n).attributes.removeNamedItem("src"),e.textContent=t.replace(/<\//g,"<\\/")});var e,t,r}))}},{"./util":9}],9:[function(e,t,c){"use strict";var n=e("url");c.getDocumentBaseUrl=function(e){return"about:blank"!==e.baseURI?e.baseURI:null},c.clone=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},c.cloneArray=function(e){return Array.prototype.slice.apply(e,[0])},c.joinUrl=function(e,t){return e?n.resolve(e,t):t},c.isDataUri=function(e){return/^data:/.test(e)},c.collectAndReportErrors=function(e){var t=[];return Promise.all(e.map(function(e){return e.catch(function(e){t.push(e)})})).then(function(){return t})};var l=null;c.ajax=function(i,u){return new Promise(function(e,t){function n(){t({msg:"Unable to load url",url:a})}var r,o=new window.XMLHttpRequest,a=c.joinUrl(u.baseUrl,i),s=a;s=!1===(r=u.cache)||"none"===r||"repeated"===r?s+"?_="+(l=null===l||"repeated"!==r?Date.now():l):s,o.addEventListener("load",function(){200===o.status||0===o.status?e(o.response):n()},!1),o.addEventListener("error",n,!1);try{o.open("GET",s,!0),o.overrideMimeType(u.mimeType),o.send(null)}catch(e){n()}})},c.binaryAjax=function(e,t){return(t=c.clone(t)).mimeType="text/plain; charset=x-user-defined",c.ajax(e,t).then(function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(255&e.charCodeAt(n));return t})},c.getDataURIForImageURL=function(e,t){return c.binaryAjax(e,t).then(function(e){var t=btoa(e);return"data:"+(n(e=e,"<?xml")||n(e,"<svg")?"image/svg+xml":"image/png")+";base64,"+t;function n(e,t){return e.substring(0,t.length)===t}})};var s=[];c.memoize=function(r,o,a){if("object"!=typeof a)throw new Error("cacheBucket is not an object");return function(){var e=Array.prototype.slice.call(arguments),t=o(e),n=(s.indexOf(n=r)<0&&s.push(n),s.indexOf(n));return a[n]&&a[n][t]?a[n][t]:(e=r.apply(null,e),a[n]=a[n]||{},a[n][t]=e)}}},{url:15}],10:[function(e,T,N){!function(S){!function(){!function(e){var t="object"==typeof N&&N&&!N.nodeType&&N,n="object"==typeof T&&T&&!T.nodeType&&T,r="object"==typeof S&&S;r.global!==r&&r.window!==r&&r.self!==r||(e=r);var o,a,g=2147483647,y=36,v=26,s=38,i=700,u=/^xn--/,c=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=y-1,w=Math.floor,x=String.fromCharCode;function b(e){throw RangeError(h[e])}function p(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function m(e,t){var n=e.split("@"),r="";return 1<n.length&&(r=n[0]+"@",e=n[1]),r+p((e=e.replace(l,".")).split("."),t).join(".")}function C(e){for(var t,n,r=[],o=0,a=e.length;o<a;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<a?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function d(e){return p(e,function(e){var t="";return 65535<e&&(t+=x((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+x(e)}).join("")}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function R(e,t,n){var r=0;for(e=n?w(e/i):e>>1,e+=w(e/t);f*v>>1<e;r+=y)e=w(e/f);return w(r+(f+1)*e/(e+s))}function U(e){var t,n,r,o,a,s,i,u=[],c=e.length,l=0,h=128,f=72,p=e.lastIndexOf("-");for(p<0&&(p=0),n=0;n<p;++n)128<=e.charCodeAt(n)&&b("not-basic"),u.push(e.charCodeAt(n));for(r=0<p?p+1:0;r<c;){for(o=l,a=1,s=y;c<=r&&b("invalid-input"),i=e.charCodeAt(r++),(y<=(i=i-48<10?i-22:i-65<26?i-65:i-97<26?i-97:y)||i>w((g-l)/a))&&b("overflow"),l+=i*a,!(i<(i=s<=f?1:f+v<=s?v:s-f));s+=y)a>w(g/(i=y-i))&&b("overflow"),a*=i;f=R(l-o,t=u.length+1,0==o),w(l/t)>g-h&&b("overflow"),h+=w(l/t),l%=t,u.splice(l++,0,h)}return d(u)}function A(e){for(var t,n,r,o,a,s,i,u,c,l,h=[],f=(e=C(e)).length,p=128,m=72,d=t=0;d<f;++d)(i=e[d])<128&&h.push(x(i));for(n=r=h.length,r&&h.push("-");n<f;){for(o=g,d=0;d<f;++d)p<=(i=e[d])&&i<o&&(o=i);for(o-p>w((g-t)/(u=n+1))&&b("overflow"),t+=(o-p)*u,p=o,d=0;d<f;++d)if((i=e[d])<p&&++t>g&&b("overflow"),i==p){for(a=t,s=y;!(a<(c=s<=m?1:m+v<=s?v:s-m));s+=y)h.push(x(E(c+(l=a-c)%(c=y-c),0))),a=w(l/c);h.push(x(E(a,0))),m=R(t,u,n==r),t=0,++n}++t,++p}return h.join("")}if(o={version:"1.3.2",ucs2:{decode:C,encode:d},decode:U,encode:A,toASCII:function(e){return m(e,function(e){return c.test(e)?"xn--"+A(e):e})},toUnicode:function(e){return m(e,function(e){return u.test(e)?U(e.slice(4).toLowerCase()):e})}},t&&n)if(T.exports==t)n.exports=o;else for(a in o)o.hasOwnProperty(a)&&(t[a]=o[a]);else e.punycode=o}(this)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(t=t||"&"),t=1e3,r&&"number"==typeof r.maxKeys&&(t=r.maxKeys);var s=e.length;0<t&&t<s&&(s=t);for(var i=0;i<s;++i){var u,c=0<=(c=(l=e[i].replace(a,"%20")).indexOf(n))?(u=l.substr(0,c),l.substr(c+1)):(u=l,""),l=decodeURIComponent(u),c=decodeURIComponent(c);Object.prototype.hasOwnProperty.call(o,l)?h(o[l])?o[l].push(c):o[l]=[o[l],c]:o[l]=c}return o};var h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],12:[function(e,t,n){"use strict";function a(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}t.exports=function(n,r,o,e){return r=r||"&",o=o||"=","object"==typeof(n=null===n?void 0:n)?i(u(n),function(e){var t=encodeURIComponent(a(e))+o;return s(n[e])?i(n[e],function(e){return t+encodeURIComponent(a(e))}).join(r):t+encodeURIComponent(a(n[e]))}).join(r):e?encodeURIComponent(a(e))+o+encodeURIComponent(a(n)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var u=Object.keys||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}},{}],13:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":11,"./encode":12}],14:[function(e,t,n){"use strict";function r(a){if(null===a)throw new Error("Parse error");if(void 0!==(a="parsererror"===a.documentElement.tagName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"===a.documentElement.namespaceURI?a.documentElement:("xml"===a.documentElement.tagName||"html"===a.documentElement.tagName)&&a.documentElement.childNodes&&0<a.documentElement.childNodes.length&&"parsererror"===a.documentElement.childNodes[0].nodeName?a.documentElement.childNodes[0]:"html"===a.documentElement.tagName&&a.documentElement.childNodes&&0<a.documentElement.childNodes.length&&"body"===a.documentElement.childNodes[0].nodeName&&a.documentElement.childNodes[0].childNodes&&a.documentElement.childNodes[0].childNodes.length&&"parsererror"===a.documentElement.childNodes[0].childNodes[0].nodeName?a.documentElement.childNodes[0].childNodes[0]:void 0))throw a=function(){for(var e,t,n,r=(t=a,n=new XMLSerializer,Array.prototype.map.call(t.childNodes,function(e){return n.serializeToString(e)}).join("")),o=0;o<s.length;o++)if(e=s[o].exec(r))return e[1]}()||"Parse error",new Error(a)}var s=[new RegExp("^<h3[^>]*>This page contains the following errors:</h3><div[^>]*>(.+?)\n?</div>"),new RegExp("^(.+)\n")];n.failOnParseError=function(e){return r(e),e}},{}],15:[function(e,t,n){"use strict";var A=e("punycode"),S=e("./util");function b(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=o,n.resolve=function(e,t){return o(e,!1,!0).resolve(t)},n.resolveObject=function(e,t){return e?o(e,!1,!0).resolveObject(t):t},n.format=function(e){return(e=S.isString(e)?o(e):e)instanceof b?e.format():b.prototype.format.call(e)},n.Url=b;var T=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,N=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),j=["'"].concat(n),O=["%","/","?",";","#"].concat(j),I=["/","?","#"],D=/^[+a-z0-9A-Z_-]{0,63}$/,P=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,L={javascript:!0,"javascript:":!0},F={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},q=e("querystring");function o(e,t,n){if(e&&S.isObject(e)&&e instanceof b)return e;var r=new b;return r.parse(e,t,n),r}b.prototype.parse=function(e,t,n){if(!S.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),o=-1!==r&&r<e.indexOf("#")?"?":"#";(r=e.split(o))[0]=r[0].replace(/\\/g,"/");var a,s,i,u=(u=e=r.join(o)).trim();if(!n&&1===e.split("#").length&&(s=N.exec(u)))return this.path=u,this.href=u,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?q.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this;if((s=T.exec(u))&&(i=(s=s[0]).toLowerCase(),this.protocol=i,u=u.substr(s.length)),(n||s||u.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(a="//"===u.substr(0,2))||s&&F[s]||(u=u.substr(2),this.slashes=!0)),!F[s]&&(a||s&&!k[s])){for(var c=-1,l=0;l<I.length;l++)-1!==(h=u.indexOf(I[l]))&&(-1===c||h<c)&&(c=h);-1!==(C=-1===c?u.lastIndexOf("@"):u.lastIndexOf("@",c))&&(E=u.slice(0,C),u=u.slice(C+1),this.auth=decodeURIComponent(E));for(var h,f,c=-1,l=0;l<O.length;l++)-1!==(h=u.indexOf(O[l]))&&(-1===c||h<c)&&(c=h);if(-1===c&&(c=u.length),this.host=u.slice(0,c),u=u.slice(c),this.parseHost(),this.hostname=this.hostname||"",!(f="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1]))for(var p=this.hostname.split(/\./),l=0,m=p.length;l<m;l++){var d=p[l];if(d&&!d.match(D)){for(var g="",y=0,v=d.length;y<v;y++)127<d.charCodeAt(y)?g+="x":g+=d[y];if(!g.match(D)){var w=p.slice(0,l),x=p.slice(l+1),b=d.match(P);b&&(w.push(b[1]),x.unshift(b[2])),x.length&&(u="/"+x.join(".")+u),this.hostname=w.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),f||(this.hostname=A.toASCII(this.hostname));var C=this.port?":"+this.port:"",E=this.hostname||"";this.host=E+C,this.href+=this.host,f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!L[i])for(l=0,m=j.length;l<m;l++){var R,U=j[l];-1!==u.indexOf(U)&&((R=encodeURIComponent(U))===U&&(R=escape(U)),u=u.split(U).join(R))}return-1!==(f=u.indexOf("#"))&&(this.hash=u.substr(f),u=u.slice(0,f)),-1!==(f=u.indexOf("?"))?(this.search=u.substr(f),this.query=u.substr(f+1),t&&(this.query=q.parse(this.query)),u=u.slice(0,f)):t&&(this.search="",this.query={}),u&&(this.pathname=u),k[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(C=this.pathname||"",i=this.search||"",this.path=C+i),this.href=this.format(),this},b.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";return this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&S.isObject(this.query)&&Object.keys(this.query).length&&(a=q.stringify(this.query)),a=this.search||a&&"?"+a||"",t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o=o||"",r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+r},b.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},b.prototype.resolveObject=function(e){S.isString(e)&&((y=new b).parse(e,!1,!0),e=y);for(var t=new b,n=Object.keys(this),r=0;r<n.length;r++){var o=n[r];t[o]=this[o]}if(t.hash=e.hash,""===e.href)return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var i=a[s];"protocol"!==i&&(t[i]=e[i])}return k[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!k[e.protocol]){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];t[l]=e[l]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||F[e.protocol])t.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),t.pathname=h.join("/")}return t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(p=t.pathname||"",m=t.search||"",t.path=p+m),t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var f=t.pathname&&"/"===t.pathname.charAt(0),p=(y=e.host||e.pathname&&"/"===e.pathname.charAt(0))||f||t.host&&e.pathname,m=p,d=t.pathname&&t.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[];if((f=t.protocol&&!k[t.protocol])&&(t.hostname="",t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),p=p&&(""===h[0]||""===d[0])),y)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,d=h;else if(h.length)(d=d||[]).pop(),d=d.concat(h),t.search=e.search,t.query=e.query;else if(!S.isNullOrUndefined(e.search))return f&&(t.hostname=t.host=d.shift(),(x=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=x.shift(),t.host=t.hostname=x.shift())),t.search=e.search,t.query=e.query,S.isNull(t.pathname)&&S.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(!d.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var g=d.slice(-1)[0],y=(t.host||e.host||1<d.length)&&("."===g||".."===g)||""===g,v=0,w=d.length;0<=w;w--)"."===(g=d[w])?d.splice(w,1):".."===g?(d.splice(w,1),v++):v&&(d.splice(w,1),v--);if(!p&&!m)for(;v--;)d.unshift("..");!p||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),y&&"/"!==d.join("/").substr(-1)&&d.push("");var x,y=""===d[0]||d[0]&&"/"===d[0].charAt(0);return f&&(t.hostname=t.host=!y&&d.length?d.shift():"",(x=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=x.shift(),t.host=t.hostname=x.shift())),(p=p||t.host&&d.length)&&!y&&d.unshift(""),d.length?t.pathname=d.join("/"):(t.pathname=null,t.path=null),S.isNull(t.pathname)&&S.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},b.prototype.parseHost=function(){var e=this.host,t=r.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":16,punycode:10,querystring:13}],16:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],17:[function(e,t,n){var r=function(){function a(e){var t=e.tagName;return"http://www.w3.org/1999/xhtml"===e.namespaceURI?t.toLowerCase():t}function s(e){return Array.prototype.map.call(e.childNodes,function(e){return t(e)}).join("")}var t=function(e,t){var n,r,o=t&&t.rootNode;return"#document"===e.nodeName||"#document-fragment"===e.nodeName?s(e):e.tagName?(t=o,n="<"+a(o=e),n+=(r=o,t=t,0<=Array.prototype.map.call(r.attributes||r.attrs,function(e){return e.name}).indexOf("xmlns")||!t&&r.namespaceURI===r.parentNode.namespaceURI?"":' xmlns="'+r.namespaceURI+'"'),Array.prototype.forEach.call(o.attributes||o.attrs,function(e){var t;n+=(t=e.value," "+e.name+'="'+t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+'"')}),0<o.childNodes.length?(n+=">",n+=s(o),n+="</"+a(o)+">"):n+="/>",n):"#text"===e.nodeName?(o=(o=e).nodeValue||o.value||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"#comment"===e.nodeName?"\x3c!--"+e.data.replace(/-/g,"&#45;")+"--\x3e":"#cdata-section"===e.nodeName?"<![CDATA["+e.nodeValue+"]]>":void 0};return{serializeToString:function(e){return t(e,{rootNode:!0}).replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")}}};"object"==typeof t&&t.exports?t.exports=r():this.xmlserializer=r()},{}]},{},[1])(1)});